# Recipe Search and Embedding Service

Этот сервис позволяет пользователям искать рецепты, основываясь на их запросах. Он использует сервис RunPod для получения эмбеддингов текста и FAISS для поиска по большому набору данных рецептов.

---

## Возможности (Features)

- **Получение эмбеддингов**: Сервис использует RunPod или локальный контейнер для получения эмбеддингов текста.
- **Поиск рецептов**: Сервис использует FAISS для быстрого поиска рецептов по эмбеддингам, используя текстовые запросы.
- **Работа с данными**: Загружает данные из Parquet-файла, обрабатывает эмбеддинги и создает индекс с использованием FAISS.
- **API для поиска рецептов**: Через FastAPI предоставляется интерфейс для запросов на поиск рецептов.

---

## Установка и запуск

1. Установите зависимости:

   ```bash
   pip install -r requirements.txt
   ```

2. Создайте файл .env:

    Файл должен находиться в папке env/ и содержать:

   ```
      RUNPOD_API_KEY=<ваш_api_ключ_RunPod>
      RUNPOD_ENDPOINT=<ваш_endpoint_RunPod>
      EMBEDDING_SERVICE_LOCAL_URL=<URL_локального_сервиса_эмбеддингов>
      EMBEDDING_SERVICE_USAGE_FLAG=<True_or_False_для_использования_локального_сервиса>
      DATASET=<путь_к_файлу_с_данными>
      LOWER_THRESHOLD=<порог фильтрации по совпадению для рецептов>
      K_NEIGHBORS=<k_neighbors>

   ```

3. Запустите бота:

   ```
      uvicorn app.main:app --reload 
   ```

---

## Обработка ошибок

1. 400 Bad Request: Неверный формат запроса.
2. 404 Not Found: Не найдено рецептов.
3. 504 Gateway Timeout: Таймаут запроса.
4. 500 Internal Server Error: Общая ошибка сервиса.
